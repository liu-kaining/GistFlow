# GistFlow Configuration Template
# Copy this file to .env and fill in your values

# ============================================================
# Gmail Configuration
# ============================================================
# Your Gmail address
GMAIL_USER=your_email@gmail.com

# Gmail App Password (generate at https://myaccount.google.com/apppasswords)
# Format: xxxx-xxxx-xxxx-xxxx (16 characters with dashes)
GMAIL_APP_PASSWORD=xxxx-xxxx-xxxx-xxxx

# Gmail folder to search (default: INBOX)
GMAIL_FOLDER=INBOX

# Gmail label to filter newsletter emails
TARGET_LABEL=Newsletter

# ============================================================
# LLM Configuration
# ============================================================
# OpenAI API Key (or compatible service like DeepSeek, OneAPI)
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# API Base URL (change for different providers)
# OpenAI: https://api.openai.com/v1
# DeepSeek: https://api.deepseek.com/v1
# OneAPI: http://localhost:3000/v1
OPENAI_BASE_URL=https://api.openai.com/v1

# Model selection
# Options: gpt-4o, gpt-4-turbo, gpt-3.5-turbo, gemini-1.5-pro, deepseek-chat
LLM_MODEL_NAME=gpt-4o

# LLM parameters (usually default values work well)
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=2000

# ============================================================
# Notion Configuration
# ============================================================
# Notion Integration API Key
# Create at https://www.notion.so/my-integrations
NOTION_API_KEY=secret_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Notion Database ID (from database URL)
# URL format: https://www.notion.so/your-workspace/DATABASE_ID?v=...
# Copy the DATABASE_ID part (32 characters, no dashes)
NOTION_DATABASE_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================
# Local Storage Configuration
# ============================================================
# Enable saving gists to local Markdown/JSON files
ENABLE_LOCAL_STORAGE=true

# Directory path for local storage (relative to project root)
LOCAL_STORAGE_PATH=./gists

# Storage format: 'markdown' or 'json'
# markdown: Human-readable files with YAML front matter
# json: Machine-readable structured data
LOCAL_STORAGE_FORMAT=markdown

# Directory for SQLite database (processed_emails, errors, etc.)
# Default: ./data  (Docker 内建议在 compose 中设置 DATA_DIR=/app/data，与 volume 一致)
DATA_DIR=./data

# ============================================================
# System Configuration
# ============================================================
# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# How often to check for new emails (minutes)
CHECK_INTERVAL_MINUTES=30

# Maximum emails to process per run (prevent rate limits)
MAX_EMAILS_PER_RUN=10

# ============================================================
# Content Processing
# ============================================================
# Maximum content length for LLM processing
MAX_CONTENT_LENGTH=20000

# Truncation strategy when content is too long
CONTENT_TRUNCATION_HEAD=15000
CONTENT_TRUNCATION_TAIL=2000

# ============================================================
# Retry Configuration
# ============================================================
# Retry settings for LLM API calls
LLM_MAX_RETRIES=3
LLM_RETRY_DELAY_SECONDS=2.0

# ============================================================
# Value Scoring Configuration
# ============================================================
# Minimum score (0-100) for a gist to be considered valuable
# Gists with score below this threshold will be skipped
# Default: 30 (adjust based on your preference for quality vs quantity)
MIN_VALUE_SCORE=30

# ============================================================
# Web Server Configuration
# ============================================================
# Web management interface port
WEB_SERVER_PORT=5800

# Web server host
# Use 0.0.0.0 for Docker/external access (default)
# Use 127.0.0.1 for local-only access
WEB_SERVER_HOST=0.0.0.0

# ============================================================
# Prompt Configuration
# ============================================================
# Path to system prompt template file
PROMPT_SYSTEM_PATH=./prompts/system_prompt.txt

# Path to user prompt template file
PROMPT_USER_PATH=./prompts/user_prompt_template.txt